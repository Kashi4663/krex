{% extends 'base.html' %}
{% load static %}

{% block content %}
<style>
/* ================= GENERAL ================= */

body {
    padding-top: 0 !important;
}

/* ================= HERO ================= */

.hero-carousel {
    margin-top: 0px;
    height: 100vh;
}

/* ================= SECTION TITLE ================= */

.section-title {
    margin-top: 40px;
    margin-left: 25px;
    text-align: left;
    font-size: 32px;
    font-weight: bold;
}

/* ================= MOVIE CAROUSEL ================= */

.carousel-container {
    position: relative;
    width: 100%;
}

.movie-row {
    display: flex;
    gap: 20px;
    padding: 30px 25px;
    overflow-x: auto;
    overflow-y: hidden;
    scroll-behavior: smooth;
    width: 100%;
}

.movie-row::-webkit-scrollbar {
    display: none;
}

/* Prevent flex shrinking */
.movie-card {
    flex: 0 0 auto;
    width: 200px;
    text-align: center;
    transition: transform 0.4s ease, box-shadow 0.4s ease;
}

.movie-card img {
    width: 100%;
    border-radius: 12px;
}

.movie-card:hover {
    transform: scale(1.07);
    box-shadow: 0 20px 40px rgba(0,0,0,0.6);
}

/* ================= CAROUSEL ARROWS ================= */

.carousel-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0,0,0,0.6);
    border: none;
    color: white;
    font-size: 30px;
    padding: 10px 15px;
    cursor: pointer;
    z-index: 10;
    border-radius: 8px;
    transition: 0.3s ease;
}

.carousel-arrow:hover {
    background: rgba(255,255,255,0.8);
    color: black;
}

.carousel-arrow.left {
    left: 5px;
}

.carousel-arrow.right {
    right: 5px;
}

/* ================= TOP 10 SECTION ================= */

.top10-row {
    display: flex;
    gap: 95px;
    padding: 30px 25px;
    overflow-x: auto;
    scroll-behavior: smooth;
}

.top10-row::-webkit-scrollbar {
    display: none;
}

.top10-card {
    position: relative;
    width: 220px;
    flex-shrink: 0;
    transition: transform 0.45s cubic-bezier(0.22, 1, 0.36, 1),
                box-shadow 0.45s cubic-bezier(0.22, 1, 0.36, 1);
}

.top10-card img {
    width: 100%;
    border-radius: 12px;
    position: relative;
    left: 30px;
    z-index: 2;
    transition: transform 0.45s cubic-bezier(0.22, 1, 0.36, 1);
}

.top10-card:hover {
    transform: translateY(-12px) scale(1.06);
    box-shadow: 0 25px 50px rgba(0,0,0,0.55);
    z-index: 20;
}

.top10-card:hover img {
    transform: scale(1.03);
}

/* ================= CRAZY RANK NUMBERS ================= */

.rank-number {
    position: absolute;
    left: -40px;
    bottom: -20px;
    font-family: 'Anton', sans-serif;
    font-size: 160px;
    font-weight: 900;
    letter-spacing: 2px;
    z-index: 3;

    transform: scaleY(1.3);
    transform-origin: bottom;

    background: linear-gradient(180deg, #ff0000, #686868);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;

    text-shadow:
        5px 5px 0px rgb(26, 0, 0),
        12px 12px 30px rgba(0, 0, 0, 0.4);
}

/* ================= FOOTER FIX ================= */

footer {
    position: relative;
    margin-top: 60px;
    background: rgba(9, 157, 190, 0.25);
    text-align: center;
    padding: 40px 0;
}

footer a {
    color: #00aaff;
    text-decoration: none;
    transition: 0.3s ease;
}

footer a:hover {
    color: #66d9ff;
}

.carousel-container {
    position: relative;
    width: 100%;
}

.carousel-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0,0,0,0.6);
    border: none;
    color: white;
    font-size: 28px;
    padding: 10px 14px;
    cursor: pointer;
    z-index: 10;
    border-radius: 8px;
    transition: 0.3s ease;
}

.carousel-arrow:hover {
    background: rgba(255,255,255,0.8);
    color: black;
}

.carousel-arrow.left { left: 5px; }
.carousel-arrow.right { right: 5px; }

/* Enable smooth scroll */
.top10-row,
.movie-row {
    overflow-x: auto;
    scroll-behavior: smooth;
}

.top10-row::-webkit-scrollbar,
.movie-row::-webkit-scrollbar {
    display: none;
}


</style>

<!-- ðŸ”¥ HERO CAROUSEL -->
<div class="hero-carousel">

    <div class="slides">

        {% for shows in trending_shows %}
            {% if shows.banner %}

            <div class="slide">
                <img src="{{ shows.banner.url }}" alt="{{ shows.title }}">

                <div class="slide-content">
                    <h1>{{ shows.title }}</h1>
                    <p>{{ shows.description|truncatewords:20 }}</p>

                    <a href="{% url 'shows_detail' shows.id %}">
                        <button class="carousel-btn">Watch Now</button>
                    </a>
                </div>
            </div>

            {% endif %}
        {% endfor %}

    </div>

    <button class="prev">&#10094;</button>
    <button class="next">&#10095;</button>

</div>

{% if query %}
<h1 class="section-title">
    Search Results for "{{ query }}"
</h1>
{% endif %}

<h1 class="section-title">Trending Shows</h1>

<div class="carousel-container">
    <button class="carousel-arrow left">&#10094;</button>
<div class="movie-row">
    {% for shows in trending_shows %}
        <div class="movie-card">
            <a href="{% url 'shows_detail' shows.id %}">
                <img src="{{ shows.poster.url }}" alt="{{ shows.title }}">
            </a>
            <h3>{{ shows.title }}</h3>
        </div>
    {% endfor %}
</div>
 <button class="carousel-arrow right">&#10095;</button>
</div>





<h1 class="section-title">Top 10 Shows</h1>

<div class="carousel-container">
    <button class="carousel-arrow left">&#10094;</button>

    <div class="top10-row">
        {% for shows in top_shows %}
        <div class="top10-card">
            <span class="rank-number">{{ forloop.counter }}</span>
            <a href="{% url 'shows_detail' shows.id %}">
                <img src="{{ shows.poster.url }}" alt="{{ shows.title }}">
            </a>
        </div>
        {% endfor %}
    </div>

    <button class="carousel-arrow right">&#10095;</button>
</div>





<h1 class="section-title">Hindi Shows</h1>

<div class="carousel-container">
    <button class="carousel-arrow left">&#10094;</button>

    <div class="movie-row">
        {% for shows in hindi_shows %}
        <div class="movie-card">
            <a href="{% url 'shows_detail' shows.id %}">
                <img src="{{ shows.poster.url }}" alt="{{ shows.title }}">
            </a>
            <h3>{{ shows.title }}</h3>
        </div>
        {% endfor %}
    </div>

    <button class="carousel-arrow right">&#10095;</button>
</div>


<h1 class="section-title">English Shows</h1>

<div class="carousel-container">
    <button class="carousel-arrow left">&#10094;</button>

    <div class="movie-row">
        {% for shows in english_shows %}
        <div class="movie-card">
            <a href="{% url 'shows_detail' shows.id %}">
                <img src="{{ shows.poster.url }}" alt="{{ shows.title }}">
            </a>
            <h3>{{ shows.title }}</h3>
        </div>
        {% endfor %}
    </div>

    <button class="carousel-arrow right">&#10095;</button>
</div>



<script>
// ================= MOVIE ROW CAROUSEL =================

document.querySelectorAll(".carousel-container").forEach(container => {

    const row = container.querySelector(".movie-row");
    const left = container.querySelector(".left");
    const right = container.querySelector(".right");

    const scrollAmount = 400;

    right.addEventListener("click", () => {
        row.scrollLeft += scrollAmount;
    });

    left.addEventListener("click", () => {
        row.scrollLeft -= scrollAmount;
    });

});


// ================= CAROUSEL LOGIC =================

document.querySelectorAll(".carousel-container").forEach(container => {

    const row = container.querySelector(".movie-row, .top10-row");
    const left = container.querySelector(".left");
    const right = container.querySelector(".right");

    const scrollAmount = 400;

    right.addEventListener("click", () => {
        row.scrollLeft += scrollAmount;
    });

    left.addEventListener("click", () => {
        row.scrollLeft -= scrollAmount;
    });

});
</script>
{% endblock %}
